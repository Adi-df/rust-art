var e,r,n,t,a,o,i,u,s,c,l,f,d,g,m;const v=document.querySelector("#glcanvas-fourier"),p=v.getContext("webgl");function b(e,r){0==e&&alert(r)}var h,_;function y(e,r,t){return new r(n.buffer,e,t)}function A(e,r){var t,a,o,i,u,s,c;let l=new Uint8Array(n.buffer,e);for(a=(t=0)+r,o="";!(t>=a);){if(!(i=l[t++]))return o;128&i?(u=63&l[t++],192!=(224&i)?(s=63&l[t++],224==(240&i)?i=(15&i)<<12|u<<6|s:(240!=(248&i)&&console.warn("Invalid UTF-8 leading byte 0x"+i.toString(16)+" encountered when deserializing a UTF-8 string on the asm.js/wasm heap to a JS string!"),i=(7&i)<<18|u<<12|s<<6|63&l[t++]),i<65536?o+=String.fromCharCode(i):(c=i-65536,o+=String.fromCharCode(55296|c>>10,56320|1023&c))):o+=String.fromCharCode((31&i)<<6|u)):o+=String.fromCharCode(i)}return o}function x(e,r,n,t,o){for(var i,u,s=0;s<e;s++)u=(i=p[n]())&&a.getNewId(t),i?(i.name=u,t[u]=i):(console.error("GL_INVALID_OPERATION"),a.recordError(1282),alert("GL_INVALID_OPERATION in "+o+": GLctx."+n+" returned null - most likely GL context is lost!")),y(r+4*s,Int32Array,1)[0]=u}function L(e,r){var n=w(),t=e.clientWidth*n,a=e.clientHeight*n;(e.width!=t||e.height!=a)&&(e.width=t,e.height=a,null!=r&&r(Math.floor(t),Math.floor(a)))}function I(){i.frame(),window.requestAnimationFrame(I)}null===p&&alert("Unable to initialize WebGL. Your browser or machine may not support it."),e=null,r=[],v.focus(),v.requestPointerLock=v.requestPointerLock||v.mozRequestPointerLock||function(){},document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||function(){},(_=(h=p).getExtension("OES_vertex_array_object"))?(h.createVertexArray=function(){return _.createVertexArrayOES()},h.deleteVertexArray=function(e){_.deleteVertexArrayOES(e)},h.bindVertexArray=function(e){_.bindVertexArrayOES(e)},h.isVertexArray=function(e){return _.isVertexArrayOES(e)}):alert("Unable to get OES_vertex_array_object extension"),function(e){var r=e.getExtension("ANGLE_instanced_arrays");r&&(e.vertexAttribDivisor=function(e,n){r.vertexAttribDivisorANGLE(e,n)},e.drawArraysInstanced=function(e,n,t,a){r.drawArraysInstancedANGLE(e,n,t,a)},e.drawElementsInstanced=function(e,n,t,a,o){r.drawElementsInstancedANGLE(e,n,t,a,o)})}(p),function(e){var r=e.getExtension("EXT_disjoint_timer_query");r&&(e.createQuery=function(){return r.createQueryEXT()},e.beginQuery=function(e,n){return r.beginQueryEXT(e,n)},e.endQuery=function(e){return r.endQueryEXT(e)},e.deleteQuery=function(e){r.deleteQueryEXT(e)},e.getQueryObject=function(e,n){return r.getQueryObjectEXT(e,n)})}(p),null==p.getExtension("WEBGL_depth_texture")&&alert("Cant initialize WEBGL_depth_texture extension"),t={loaded_files:[],unique_id:0},a={counter:1,buffers:[],mappedBuffers:{},programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],timerQueries:[],contexts:{},programInfos:{},getNewId:function(e){for(var r=a.counter++,n=e.length;n<r;n++)e[n]=null;return r},validateGLObjectID:function(e,r,n,t){0!=r&&(null===e[r]?console.error(n+" called with an already deleted "+t+" ID "+r+"!"):e[r]||console.error(n+" called with an invalid "+t+" ID "+r+"!"))},getSource:function(e,r,n,t){for(var a,o="",i=0;i<r;++i)a=0==t?void 0:y(t+4*i,Uint32Array,1)[0],o+=A(y(n+4*i,Uint32Array,1)[0],a);return o},populateUniformTable:function(e){var r,n,t,o,i,u,s,c,l,f,d;for(a.validateGLObjectID(a.programs,e,"populateUniformTable","program"),r=a.programs[e],t=(n=a.programInfos[e]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1}).uniforms,o=p.getProgramParameter(r,35718),i=0;i<o;++i)if(s=(u=p.getActiveUniform(r,i)).name,n.maxUniformLength=Math.max(n.maxUniformLength,s.length+1),"]"==s.slice(-1)&&(s=s.slice(0,s.lastIndexOf("["))),c=p.getUniformLocation(r,s))for(l=a.getNewId(a.uniforms),t[s]=[u.size,l],a.uniforms[l]=c,f=1;f<u.size;++f)d=s+"["+f+"]",c=p.getUniformLocation(r,d),l=a.getNewId(a.uniforms),a.uniforms[l]=c}};function D(e){switch(e){case 0:return 0;case 1:return 2;case 2:return 1;default:return e}}function G(e){switch(e){case"Space":return 32;case"Quote":return 39;case"Comma":return 44;case"Minus":return 45;case"Period":return 46;case"Slash":return 47;case"Digit0":return 48;case"Digit1":return 49;case"Digit2":return 50;case"Digit3":return 51;case"Digit4":return 52;case"Digit5":return 53;case"Digit6":return 54;case"Digit7":return 55;case"Digit8":return 56;case"Digit9":return 57;case"Semicolon":return 59;case"Equal":return 61;case"KeyA":return 65;case"KeyB":return 66;case"KeyC":return 67;case"KeyD":return 68;case"KeyE":return 69;case"KeyF":return 70;case"KeyG":return 71;case"KeyH":return 72;case"KeyI":return 73;case"KeyJ":return 74;case"KeyK":return 75;case"KeyL":return 76;case"KeyM":return 77;case"KeyN":return 78;case"KeyO":return 79;case"KeyP":return 80;case"KeyQ":return 81;case"KeyR":return 82;case"KeyS":return 83;case"KeyT":return 84;case"KeyU":return 85;case"KeyV":return 86;case"KeyW":return 87;case"KeyX":return 88;case"KeyY":return 89;case"KeyZ":return 90;case"BracketLeft":return 91;case"Backslash":return 92;case"BracketRight":return 93;case"Backquote":return 96;case"Escape":return 256;case"Enter":return 257;case"Tab":return 258;case"Backspace":return 259;case"Insert":return 260;case"Delete":return 261;case"ArrowRight":return 262;case"ArrowLeft":return 263;case"ArrowDown":return 264;case"ArrowUp":return 265;case"PageUp":return 266;case"PageDown":return 267;case"Home":return 268;case"End":return 269;case"CapsLock":return 280;case"ScrollLock":return 281;case"NumLock":return 282;case"PrintScreen":return 283;case"Pause":return 284;case"F1":return 290;case"F2":return 291;case"F3":return 292;case"F4":return 293;case"F5":return 294;case"F6":return 295;case"F7":return 296;case"F8":return 297;case"F9":return 298;case"F10":return 299;case"F11":return 300;case"F12":return 301;case"F13":return 302;case"F14":return 303;case"F15":return 304;case"F16":return 305;case"F17":return 306;case"F18":return 307;case"F19":return 308;case"F20":return 309;case"F21":return 310;case"F22":return 311;case"F23":return 312;case"F24":return 313;case"Numpad0":return 320;case"Numpad1":return 321;case"Numpad2":return 322;case"Numpad3":return 323;case"Numpad4":return 324;case"Numpad5":return 325;case"Numpad6":return 326;case"Numpad7":return 327;case"Numpad8":return 328;case"Numpad9":return 329;case"NumpadDecimal":return 330;case"NumpadDivide":return 331;case"NumpadMultiply":return 332;case"NumpadSubstract":return 333;case"NumpadAdd":return 334;case"NumpadEnter":return 335;case"NumpadEqual":return 336;case"ShiftLeft":return 340;case"ControlLeft":return 341;case"AltLeft":return 342;case"OSLeft":return 343;case"ShiftRight":return 344;case"ControlRight":return 345;case"AltRight":return 346;case"OSRight":return 347;case"ContextMenu":return 348}console.log("Unsupported keyboard key: ",e)}function w(){return 1}function U(e,r,n){return e==p.ALPHA?r*n:e==p.RGB?r*n*3:e==p.RGBA?r*n*4:r*n*3}function S(e,r){var n=v.getBoundingClientRect();return{x:1*(e-n.left),y:1*(r-n.top)}}function E(e){return(e>>24&255)+"."+(e>>16&255)+"."+(65535&e)}function F(e){var r,n,t;if(null!=e)for(r=0;r<e.length;r++)null!=e[r].on_init&&null!=e[r].on_init&&e[r].on_init(),null==e[r].name||null==e[r].name||null==e[r].version||null==e[r].version?(console.warn("Some of the registred plugins do not have name or version"),console.warn("Probably old version of the plugin used")):(n=e[r].name+"_crate_version",null==i[n]?console.log("Plugin "+e[r].name+" is present in JS bundle, but is not used in the rust code."):(t=E(i[n]()),e[r].version!=t&&console.error("Plugin "+e[r].name+" version mismatchjs version: "+e[r].version+", crate version: "+t)))}function P(e){r.push(e)}function j(e){var r=WebAssembly.Module.imports(e);for(const e in r)null==s.env[r[e].name]&&(console.warn("No "+r[e].name+" function in gl.js"),s.env[r[e].name]=function(){console.warn("Missed function: "+r[e].name)})}function O(e){var t=fetch(e);(function(e){if(null!=e)for(var r=0;r<e.length;r++)null!=e[r].register_plugin&&null!=e[r].register_plugin&&e[r].register_plugin(s)})(r),"function"==typeof WebAssembly.compileStreaming?WebAssembly.compileStreaming(t).then((e=>(j(e),WebAssembly.instantiate(e,s)))).then((e=>{n=e.exports.memory;var t=E((i=e.exports).crate_version());"0.1.26"!=t&&console.error("Version mismatch: gl.js version is: 0.1.26, rust sapp-wasm crate version is: "+t),F(r),e.exports.main()})).catch((e=>{console.error("WASM failed to load, probably incompatible gl.js version"),console.error(e)})):t.then((function(e){return e.arrayBuffer()})).then((function(e){return WebAssembly.compile(e)})).then((function(e){return j(e),WebAssembly.instantiate(e,s)})).then((function(e){n=e.exports.memory;var t=E((i=e.exports).crate_version());"0.1.26"!=t&&console.error("Version mismatch: gl.js version is: 0.1.26, rust sapp-wasm crate version is: "+t),F(r),e.exports.main()})).catch((e=>{console.error("WASM failed to load, probably incompatible gl.js version"),console.error(e)}))}function T(e){for(var r,n=[],t=0;t<e.length;t++)(r=e.charCodeAt(t))<128?n.push(r):r<2048?n.push(192|r>>6,128|63&r):r<55296||r>=57344?n.push(224|r>>12,128|r>>6&63,128|63&r):(t++,r=65536+((1023&r)<<10|1023&e.charCodeAt(t)),n.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r));return n}function N(e){var r=c;return undefined[r]=e,c+=1,r}function C(e){var r=undefined[e];return delete undefined[e],r}function M(){return f}function k(e){(l=new WebSocket(C(e))).binaryType="arraybuffer",l.onopen=function(){f=1},l.onmessage=function(e){if("string"==typeof e.data)d.push({text:1,data:e.data});else{var r=new Uint8Array(e.data);d.push({text:0,data:r})}}}function B(e){var r=C(e);null!=r.buffer?l.send(r.buffer):l.send(r)}function Q(){return 0!=d.length?N(d.shift()):-1}function V(e){if(null!=m[e]&&null!=m[e]){var r=m[e];return m[e]=null,N(r)}return-1}function K(e,r,n,t){var a,o,i,u,s,c=g;g+=1,0==e&&(a="POST"),1==e&&(a="PUT"),2==e&&(a="GET"),3==e&&(a="DELETE"),o=C(r),i=C(n),u=C(t),(s=new XMLHttpRequest).open(a,o,!0),s.responseType="arraybuffer";for(const e in u)s.setRequestHeader(e,u[e]);return s.onload=function(e){if(200==this.status){var r=new Uint8Array(this.response);m[c]=r}},s.onerror=function(e){console.error("Failed to make a request"),console.error(e)},s.send(i),c}u=!1,s={env:{console_debug:function(e){console.debug(A(e))},console_log:function(e){console.log(A(e))},console_info:function(e){console.info(A(e))},console_warn:function(e){console.warn(A(e))},console_error:function(e){console.error(A(e))},set_emscripten_shader_hack:function(e){u=e},sapp_set_clipboard:function(r,n){e=A(r,n)},dpi_scale:w,rand:function(){return Math.floor(2147483647*Math.random())},now:function(){return Date.now()/1e3},canvas_width:function(){return Math.floor(v.width)},canvas_height:function(){return Math.floor(v.height)},glClearDepthf:function(e){p.clearDepth(e)},glClearColor:function(e,r,n,t){p.clearColor(e,r,n,t)},glClearStencil:function(e){p.clearColorStencil(e)},glColorMask:function(e,r,n,t){p.colorMask(e,r,n,t)},glScissor:function(e,r,n,t){p.scissor(e,r,n,t)},glClear:function(e){p.clear(e)},glGenTextures:function(e,r){x(e,r,"createTexture",a.textures,"glGenTextures")},glActiveTexture:function(e){p.activeTexture(e)},glBindTexture:function(e,r){a.validateGLObjectID(a.textures,r,"glBindTexture","texture"),p.bindTexture(e,a.textures[r])},glTexImage2D:function(e,r,n,t,a,o,i,u,s){p.texImage2D(e,r,n,t,a,o,i,u,s?y(s,Uint8Array,U(n,t,a)):null)},glTexSubImage2D:function(e,r,n,t,a,o,i,u,s){p.texSubImage2D(e,r,n,t,a,o,i,u,s?y(s,Uint8Array,U(i,a,o)):null)},glReadPixels:function(e,r,n,t,a,o,i){var u=y(i,Uint8Array,U(a,n,t));p.readPixels(e,r,n,t,a,o,u)},glTexParameteri:function(e,r,n){p.texParameteri(e,r,n)},glUniform1fv:function(e,r,n){a.validateGLObjectID(a.uniforms,e,"glUniform1fv","location"),b(0==(3&n),"Pointer to float data passed to glUniform1fv must be aligned to four bytes!");var t=y(n,Float32Array,1*r);p.uniform1fv(a.uniforms[e],t)},glUniform2fv:function(e,r,n){a.validateGLObjectID(a.uniforms,e,"glUniform2fv","location"),b(0==(3&n),"Pointer to float data passed to glUniform2fv must be aligned to four bytes!");var t=y(n,Float32Array,2*r);p.uniform2fv(a.uniforms[e],t)},glUniform3fv:function(e,r,n){a.validateGLObjectID(a.uniforms,e,"glUniform3fv","location"),b(0==(3&n),"Pointer to float data passed to glUniform3fv must be aligned to four bytes!");var t=y(n,Float32Array,3*r);p.uniform3fv(a.uniforms[e],t)},glUniform4fv:function(e,r,n){a.validateGLObjectID(a.uniforms,e,"glUniform4fv","location"),b(0==(3&n),"Pointer to float data passed to glUniform4fv must be aligned to four bytes!");var t=y(n,Float32Array,4*r);p.uniform4fv(a.uniforms[e],t)},glUniform1iv:function(e,r,n){a.validateGLObjectID(a.uniforms,e,"glUniform1fv","location"),b(0==(3&n),"Pointer to i32 data passed to glUniform1iv must be aligned to four bytes!");var t=y(n,Int32Array,1*r);p.uniform1iv(a.uniforms[e],t)},glUniform2iv:function(e,r,n){a.validateGLObjectID(a.uniforms,e,"glUniform2fv","location"),b(0==(3&n),"Pointer to i32 data passed to glUniform2iv must be aligned to four bytes!");var t=y(n,Int32Array,2*r);p.uniform2iv(a.uniforms[e],t)},glUniform3iv:function(e,r,n){a.validateGLObjectID(a.uniforms,e,"glUniform3fv","location"),b(0==(3&n),"Pointer to i32 data passed to glUniform3iv must be aligned to four bytes!");var t=y(n,Int32Array,3*r);p.uniform3iv(a.uniforms[e],t)},glUniform4iv:function(e,r,n){a.validateGLObjectID(a.uniforms,e,"glUniform4fv","location"),b(0==(3&n),"Pointer to i32 data passed to glUniform4iv must be aligned to four bytes!");var t=y(n,Int32Array,4*r);p.uniform4iv(a.uniforms[e],t)},glBlendFunc:function(e,r){p.blendFunc(e,r)},glBlendEquationSeparate:function(e,r){p.blendEquationSeparate(e,r)},glDisable:function(e){p.disable(e)},glDrawElements:function(e,r,n,t){p.drawElements(e,r,n,t)},glGetIntegerv:function(e,r){!function(e,r,n){var t,o,i,u;if(!r)return console.error("GL_INVALID_VALUE in glGet"+n+"v(name="+e+": Function called with null out pointer!"),void a.recordError(1281);switch(t=void 0,e){case 36346:t=1;break;case 36344:return void("EM_FUNC_SIG_PARAM_I"!=n&&"EM_FUNC_SIG_PARAM_I64"!=n&&(a.recordError(1280),err("GL_INVALID_ENUM in glGet"+n+"v(GL_SHADER_BINARY_FORMATS): Invalid parameter type!")));case 34814:case 36345:t=0;break;case 34466:t=(o=p.getParameter(34467))?o.length:0;break;case 33309:case 33307:case 33308:b(!1,"unimplemented")}if(void 0===t)switch(i=p.getParameter(e),typeof i){case"number":t=i;break;case"boolean":t=i?1:0;break;case"string":return a.recordError(1280),void console.error("GL_INVALID_ENUM in glGet"+n+"v("+e+") on a name which returns a string!");case"object":if(null===i)switch(e){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 35097:case 36389:case 34068:t=0;break;default:return a.recordError(1280),void console.error("GL_INVALID_ENUM in glGet"+n+"v("+e+") and it returns null!")}else{if(i instanceof Float32Array||i instanceof Uint32Array||i instanceof Int32Array||i instanceof Array){for(u=0;u<i.length;++u)b(!1,"unimplemented");return}try{t=0|i.name}catch(t){return a.recordError(1280),void console.error("GL_INVALID_ENUM in glGet"+n+"v: Unknown object returned from WebGL getParameter("+e+")! (error: "+t+")")}}break;default:return a.recordError(1280),void console.error("GL_INVALID_ENUM in glGet"+n+"v: Native code calling glGet"+n+"v("+e+") and it returns "+i+" of type "+typeof i+"!")}switch(n){case"EM_FUNC_SIG_PARAM_I64":y(r,Int32Array,1)[0]=t;case"EM_FUNC_SIG_PARAM_I":y(r,Int32Array,1)[0]=t;break;case"EM_FUNC_SIG_PARAM_F":y(r,Float32Array,1)[0]=t;break;case"EM_FUNC_SIG_PARAM_B":y(r,Int8Array,1)[0]=t?1:0;break;default:throw"internal glGet error, bad type: "+n}}(e,r,"EM_FUNC_SIG_PARAM_I")},glUniform1f:function(e,r){a.validateGLObjectID(a.uniforms,e,"glUniform1f","location"),p.uniform1f(a.uniforms[e],r)},glUniform1i:function(e,r){a.validateGLObjectID(a.uniforms,e,"glUniform1i","location"),p.uniform1i(a.uniforms[e],r)},glGetAttribLocation:function(e,r){return p.getAttribLocation(a.programs[e],A(r))},glEnableVertexAttribArray:function(e){p.enableVertexAttribArray(e)},glDisableVertexAttribArray:function(e){p.disableVertexAttribArray(e)},glVertexAttribPointer:function(e,r,n,t,a,o){p.vertexAttribPointer(e,r,n,!!t,a,o)},glGetUniformLocation:function(e,r){var n,t,o;return a.validateGLObjectID(a.programs,e,"glGetUniformLocation","program"),n=0,"]"==(r=A(r))[r.length-1]&&(t=r.lastIndexOf("["),n="]"!=r[t+1]?parseInt(r.slice(t+1)):0,r=r.slice(0,t)),(o=a.programInfos[e]&&a.programInfos[e].uniforms[r])&&n>=0&&n<o[0]?o[1]+n:-1},glUniformMatrix4fv:function(e,r,n,t){a.validateGLObjectID(a.uniforms,e,"glUniformMatrix4fv","location"),b(0==(3&t),"Pointer to float data passed to glUniformMatrix4fv must be aligned to four bytes!");var o=y(t,Float32Array,16);p.uniformMatrix4fv(a.uniforms[e],!!n,o)},glUseProgram:function(e){a.validateGLObjectID(a.programs,e,"glUseProgram","program"),p.useProgram(a.programs[e])},glGenVertexArrays:function(e,r){x(e,r,"createVertexArray",a.vaos,"glGenVertexArrays")},glGenFramebuffers:function(e,r){x(e,r,"createFramebuffer",a.framebuffers,"glGenFramebuffers")},glBindVertexArray:function(e){p.bindVertexArray(a.vaos[e])},glBindFramebuffer:function(e,r){a.validateGLObjectID(a.framebuffers,r,"glBindFramebuffer","framebuffer"),p.bindFramebuffer(e,a.framebuffers[r])},glGenBuffers:function(e,r){x(e,r,"createBuffer",a.buffers,"glGenBuffers")},glBindBuffer:function(e,r){a.validateGLObjectID(a.buffers,r,"glBindBuffer","buffer"),p.bindBuffer(e,a.buffers[r])},glBufferData:function(e,r,n,t){p.bufferData(e,n?y(n,Uint8Array,r):r,t)},glBufferSubData:function(e,r,n,t){p.bufferSubData(e,r,t?y(t,Uint8Array,n):n)},glEnable:function(e){p.enable(e)},glFlush:function(){p.flush()},glFinish:function(){p.finish()},glDepthFunc:function(e){p.depthFunc(e)},glBlendFuncSeparate:function(e,r,n,t){p.blendFuncSeparate(e,r,n,t)},glViewport:function(e,r,n,t){p.viewport(e,r,n,t)},glDrawArrays:function(e,r,n){p.drawArrays(e,r,n)},glCreateProgram:function(){var e=a.getNewId(a.programs),r=p.createProgram();return r.name=e,a.programs[e]=r,e},glAttachShader:function(e,r){a.validateGLObjectID(a.programs,e,"glAttachShader","program"),a.validateGLObjectID(a.shaders,r,"glAttachShader","shader"),p.attachShader(a.programs[e],a.shaders[r])},glLinkProgram:function(e){a.validateGLObjectID(a.programs,e,"glLinkProgram","program"),p.linkProgram(a.programs[e]),a.populateUniformTable(e)},glPixelStorei:function(e,r){p.pixelStorei(e,r)},glFramebufferTexture2D:function(e,r,n,t,o){a.validateGLObjectID(a.textures,t,"glFramebufferTexture2D","texture"),p.framebufferTexture2D(e,r,n,a.textures[t],o)},glGetProgramiv:function(e,r,n){var t;if(b(n),a.validateGLObjectID(a.programs,e,"glGetProgramiv","program"),e>=a.counter)console.error("GL_INVALID_VALUE in glGetProgramiv");else if(a.programInfos[e])if(35716==r)b(null!==(t=p.getProgramInfoLog(a.programs[e]))),y(n,Int32Array,1)[0]=t.length+1;else{if(35719==r)return void console.error("unsupported operation");if(35722==r)return void console.error("unsupported operation");if(35381==r)return void console.error("unsupported operation");y(n,Int32Array,1)[0]=p.getProgramParameter(a.programs[e],r)}else console.error("GL_INVALID_OPERATION in glGetProgramiv(program="+e+", pname="+r+", p=0x"+n.toString(16)+"): The specified GL object name does not refer to a program object!")},glCreateShader:function(e){var r=a.getNewId(a.shaders);return a.shaders[r]=p.createShader(e),r},glStencilFuncSeparate:function(e,r,n,t){p.stencilFuncSeparate(e,r,n,t)},glStencilMaskSeparate:function(e,r){p.stencilMaskSeparate(e,r)},glStencilOpSeparate:function(e,r,n,t){p.stencilOpSeparate(e,r,n,t)},glFrontFace:function(e){p.frontFace(e)},glCullFace:function(e){p.cullFace(e)},glCopyTexImage2D:function(e,r,n,t,a,o,i,u){p.copyTexImage2D(e,r,n,t,a,o,i,u)},glShaderSource:function(e,r,n,t){var o,i;a.validateGLObjectID(a.shaders,e,"glShaderSource","shader"),o=a.getSource(e,r,n,t),u&&(i="",-1!=(o=(o=o.replace(/#extension GL_OES_standard_derivatives : enable/g,"")).replace(/#extension GL_EXT_shader_texture_lod : enable/g,"")).indexOf("gl_FragColor")&&(i+="out mediump vec4 GL_FragColor;\n",o=o.replace(/gl_FragColor/g,"GL_FragColor")),-1!=o.indexOf("attribute")?o=(o=o.replace(/attribute/g,"in")).replace(/varying/g,"out"):o=o.replace(/varying/g,"in"),o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=o.replace(/textureCubeLodEXT/g,"textureCubeLod")).replace(/texture2DLodEXT/g,"texture2DLod")).replace(/texture2DProjLodEXT/g,"texture2DProjLod")).replace(/texture2DGradEXT/g,"texture2DGrad")).replace(/texture2DProjGradEXT/g,"texture2DProjGrad")).replace(/textureCubeGradEXT/g,"textureCubeGrad")).replace(/textureCube/g,"texture")).replace(/texture1D/g,"texture")).replace(/texture2D/g,"texture")).replace(/texture3D/g,"texture")).replace(/#version 100/g,"#version 300 es\n"+i)),p.shaderSource(a.shaders[e],o)},glGetProgramInfoLog:function(e,r,n,t){var o,i;a.validateGLObjectID(a.programs,e,"glGetProgramInfoLog","program"),b(null!==(o=p.getProgramInfoLog(a.programs[e])));let u=y(t,Uint8Array,r);for(i=0;i<r;i++)u[i]=o.charCodeAt(i)},glCompileShader:function(e,r,n,t){a.validateGLObjectID(a.shaders,e,"glCompileShader","shader"),p.compileShader(a.shaders[e])},glGetShaderiv:function(e,r,n){var t,o,i;b(n),a.validateGLObjectID(a.shaders,e,"glGetShaderiv","shader"),35716==r?(b(null!==(t=p.getShaderInfoLog(a.shaders[e]))),y(n,Int32Array,1)[0]=t.length+1):35720==r?(i=null===(o=p.getShaderSource(a.shaders[e]))||0==o.length?0:o.length+1,y(n,Int32Array,1)[0]=i):y(n,Int32Array,1)[0]=p.getShaderParameter(a.shaders[e],r)},glGetShaderInfoLog:function(e,r,n,t){var o,i;a.validateGLObjectID(a.shaders,e,"glGetShaderInfoLog","shader"),b(null!==(o=p.getShaderInfoLog(a.shaders[e])));let u=y(t,Uint8Array,r);for(i=0;i<r;i++)u[i]=o.charCodeAt(i)},glVertexAttribDivisor:function(e,r){p.vertexAttribDivisor(e,r)},glDrawArraysInstanced:function(e,r,n,t){p.drawArraysInstanced(e,r,n,t)},glDrawElementsInstanced:function(e,r,n,t,a){p.drawElementsInstanced(e,r,n,t,a)},glDeleteShader:function(e){p.deleteShader(e)},glDeleteBuffers:function(e,r){for(var n,t,o=0;o<e;o++)n=y(r+4*o,Uint32Array,1)[0],(t=a.buffers[n])&&(p.deleteBuffer(t),t.name=0,a.buffers[n]=null)},glDeleteFramebuffers:function(e,r){for(var n,t,o=0;o<e;o++)n=y(r+4*o,Uint32Array,1)[0],(t=a.framebuffers[n])&&(p.deleteFramebuffer(t),t.name=0,a.framebuffers[n]=null)},glDeleteTextures:function(e,r){for(var n,t,o=0;o<e;o++)n=y(r+4*o,Uint32Array,1)[0],(t=a.textures[n])&&(p.deleteTexture(t),t.name=0,a.textures[n]=null)},glGenQueries:function(e,r){x(e,r,"createQuery",a.timerQueries,"glGenQueries")},glDeleteQueries:function(e,r){for(var n,t,o=0;o<e;o++)n=y(textures+4*o,Uint32Array,1)[0],(t=a.timerQueries[n])&&(p.deleteQuery(t),t.name=0,a.timerQueries[n]=null)},glBeginQuery:function(e,r){a.validateGLObjectID(a.timerQueries,r,"glBeginQuery","id"),p.beginQuery(e,a.timerQueries[r])},glEndQuery:function(e){p.endQuery(e)},glGetQueryObjectiv:function(e,r,n){a.validateGLObjectID(a.timerQueries,e,"glGetQueryObjectiv","id");let t=p.getQueryObject(a.timerQueries[e],r);y(n,Uint32Array,1)[0]=t},glGetQueryObjectui64v:function(e,r,n){a.validateGLObjectID(a.timerQueries,e,"glGetQueryObjectui64v","id");let t=p.getQueryObject(a.timerQueries[e],r),o=y(n,Uint32Array,2);o[0]=t,o[1]=(t-o[0])/4294967296},setup_canvas_size:function(e){window.high_dpi=e,L(v)},run_animation_loop:function(r){v.onmousemove=function(e){var r=S(e.clientX,e.clientY),n=r.x,t=r.y;i.mouse_move(Math.floor(n),Math.floor(t)),(0!=e.movementX||0!=e.movementY)&&i.raw_mouse_move(Math.floor(e.movementX),Math.floor(e.movementY))},v.onmousedown=function(e){var r=S(e.clientX,e.clientY),n=r.x,t=r.y,a=D(e.button);i.mouse_down(n,t,a)},v.addEventListener("wheel",(function(e){e.preventDefault(),i.mouse_wheel(-e.deltaX,-e.deltaY)})),v.onmouseup=function(e){var r=S(e.clientX,e.clientY),n=r.x,t=r.y,a=D(e.button);i.mouse_up(n,t,a)},v.onkeydown=function(e){var r,n=G(e.code);switch(n){case 32:case 262:case 263:case 264:case 265:case 290:case 291:case 292:case 293:case 294:case 295:case 296:case 297:case 298:case 299:case 259:case 258:case 39:case 47:e.preventDefault()}r=0,e.ctrlKey&&(r|=2),e.shiftKey&&(r|=1),e.altKey&&(r|=4),i.key_down(n,r,e.repeat),(32==n||39==n||47==n)&&i.key_press(n)},v.onkeyup=function(e){var r=G(e.code);i.key_up(r)},v.onkeypress=function(e){0==(261==G(e.code)||e.ctrlKey)&&i.key_press(e.charCode)},v.addEventListener("touchstart",(function(e){e.preventDefault();for(const r of e.changedTouches)i.touch(10,r.identifier,1*Math.floor(r.clientX),1*Math.floor(r.clientY))})),v.addEventListener("touchend",(function(e){e.preventDefault();for(const r of e.changedTouches)i.touch(12,r.identifier,1*Math.floor(r.clientX),1*Math.floor(r.clientY))})),v.addEventListener("touchcancel",(function(e){e.preventDefault();for(const r of e.changedTouches)i.touch(SAPP_EVENTTYPE_TOUCHES_CANCELED,r.identifier,1*Math.floor(r.clientX),1*Math.floor(r.clientY))})),v.addEventListener("touchmove",(function(e){e.preventDefault();for(const r of e.changedTouches)i.touch(11,r.identifier,1*Math.floor(r.clientX),1*Math.floor(r.clientY))})),window.onresize=function(){L(v,i.resize)},window.addEventListener("copy",(function(r){null!=e&&(event.clipboardData.setData("text/plain",e),event.preventDefault())})),window.addEventListener("cut",(function(r){null!=e&&(event.clipboardData.setData("text/plain",e),event.preventDefault())})),window.addEventListener("paste",(function(e){var r,t,a;e.stopPropagation(),e.preventDefault(),null!=(r=(e.clipboardData||window.clipboardData).getData("Text"))&&null!=r&&0!=r.length&&(t=(new TextEncoder).encode(r).length,a=i.allocate_vec_u8(t),function(e,r,n,t){for(var a,o=n,i=n+t,u=0;u<e.length;++u)if((a=e.charCodeAt(u))>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++u)),a<=127){if(n>=i)break;r[n++]=a}else if(a<=2047){if(n+1>=i)break;r[n++]=192|a>>6,r[n++]=128|63&a}else if(a<=65535){if(n+2>=i)break;r[n++]=224|a>>12,r[n++]=128|a>>6&63,r[n++]=128|63&a}else{if(n+3>=i)break;a>=2097152&&console.warn("Invalid Unicode code point 0x"+a.toString(16)+" encountered when serializing a JS string to an UTF-8 string on the asm.js/wasm heap! (Valid unicode code points should be in range 0-0x1FFFFF)."),r[n++]=240|a>>18,r[n++]=128|a>>12&63,r[n++]=128|a>>6&63,r[n++]=128|63&a}}(r,new Uint8Array(n.buffer,a,t),0,t),i.on_clipboard_paste(a,t))})),window.requestAnimationFrame(I)},fs_load_file:function(e,r){var n,a=A(e,r),o=t.unique_id;return t.unique_id+=1,(n=new XMLHttpRequest).open("GET",a,!0),n.responseType="arraybuffer",n.onload=function(e){if(200==this.status){var r=new Uint8Array(this.response);t.loaded_files[o]=r,i.file_loaded(o)}},n.onerror=function(e){t.loaded_files[o]=null,i.file_loaded(o)},n.send(),o},fs_get_buffer_size:function(e){return null==t.loaded_files[e]?-1:t.loaded_files[e].length},fs_take_buffer:function(e,r,a){var o,i,u=t.loaded_files[e];for(console.assert(u.length<=a),o=new Uint8Array(n.buffer,r,a),i=0;i<u.length;i++)o[i]=u[i];delete t.loaded_files[e]},sapp_set_cursor_grab:function(e){e?v.requestPointerLock():document.exitPointerLock()},sapp_set_cursor:function(e,r){v.style.cursor=A(e,r)},sapp_is_fullscreen:function(){let e=document.fullscreenElement;return null!=e&&e.id==v.id},sapp_set_fullscreen:function(e){e?v.requestFullscreen():document.exitFullscreen()},sapp_set_window_size:function(e,r){v.width=e,v.height=r,L(v,i.resize)}}},o=function(e){e.env.js_create_string=function(e,r){return N(A(e,r))},e.env.js_create_buffer=function(e,r){var t=new Uint8Array(n.buffer,e,r),a=new Uint8Array(new ArrayBuffer(t.byteLength));return a.set(new Uint8Array(t)),N(a)},e.env.js_create_object=function(){return N({})},e.env.js_set_field_f32=function(e,r,n,t){var a=A(r,n);undefined[e][a]=t},e.env.js_set_field_string=function(e,r,n,t,a){var o=A(r,n),i=A(t,a);undefined[e][o]=i},e.env.js_unwrap_to_str=function(e,r,t){for(var a=T(undefined[e]),o=a.length,i=new Uint8Array(n.buffer,r,t),u=0;u<o;u++)i[u]=a[u]},e.env.js_unwrap_to_buf=function(e,r,t){for(var a=undefined[e],o=a.length,i=new Uint8Array(n.buffer,r,t),u=0;u<o;u++)i[u]=a[u]},e.env.js_string_length=function(e){return T(undefined[e]).length},e.env.js_buf_length=function(e){return undefined[e].length},e.env.js_free_object=function(e){delete undefined[e]},e.env.js_have_field=function(e,r,n){var t=A(r,n);return void 0!==undefined[e][t]},e.env.js_field_num=function(e,r,n){var t=A(r,n);return undefined[e][t]},e.env.js_field=function(e,r,n){var t=A(r,n),a=undefined[e][t],o=c;return undefined[o]=a,c+=1,o}},P({register_plugin:o,version:"0.1.5",name:"sapp_jsutils"}),o=function(e){e.env.ws_connect=k,e.env.ws_is_connected=M,e.env.ws_send=B,e.env.ws_try_recv=Q,e.env.http_make_request=K,e.env.http_try_recv=V},P({register_plugin:o,on_init:function(){},version:"0.1.1",name:"quad_net"}),f=0,d=[],g=0,m={};export default O;
